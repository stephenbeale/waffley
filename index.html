<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waffley - Learn Colour Words</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<div id="language-screen" class="active">
    <h1>Waffley</h1>
    <p class="instructions">
        Learn words in a new language!<br><br>
        Pick a topic and match each <strong>image or colour</strong> to the <strong>correct word</strong> in your chosen language.
    </p>

    <div class="setting-label">I want to learn</div>
    <div class="language-selector">
        <button class="language-btn" data-lang="es">ğŸ‡ªğŸ‡¸ Spanish</button>
        <button class="language-btn" data-lang="fr">ğŸ‡«ğŸ‡· French</button>
        <button class="language-btn" data-lang="de">ğŸ‡©ğŸ‡ª German</button>
        <button class="language-btn" data-lang="it">ğŸ‡®ğŸ‡¹ Italian</button>
        <button class="language-btn" data-lang="cy">ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿ Welsh</button>
        <button class="language-btn" data-lang="pt">ğŸ‡µğŸ‡¹ Portuguese</button>
    </div>

    <div class="audio-toggle-container">
        <label class="audio-toggle">
            <input type="checkbox" id="audio-toggle-input">
            <span class="audio-toggle-slider"></span>
            <span class="audio-toggle-icon">ğŸ”Š</span>
            <span class="audio-toggle-label">Play pronunciation</span>
        </label>
    </div>

    <button id="stats-btn">Statistics</button>
</div>

<div id="topic-screen">
    <div class="topic-header" id="topic-header">ğŸ‡ªğŸ‡¸ Spanish</div>

    <div class="setting-label">Category</div>
    <div class="category-selector">
        <button class="category-btn selected" data-category="colours">ğŸ¨ Colours</button>
        <button class="category-btn" data-category="adjectives">ğŸ˜Š Adjectives</button>
        <button class="category-btn" data-category="animals">ğŸ¾ Animals</button>
        <button class="category-btn" data-category="food">ğŸ Food</button>
        <button class="category-btn" data-category="weather">â˜€ï¸ Weather</button>
    </div>

    <div class="progress-display" id="progress-display">
        <div class="progress-title">Your Journey</div>
        <div class="journey-tracker" id="journey-tracker">
            <div class="journey-phase" data-phase="0">
                <div class="journey-dot"></div>
                <div class="journey-phase-info">
                    <div class="journey-phase-name">Learning</div>
                    <div class="journey-phase-desc">Words shown with answers</div>
                    <div class="journey-phase-progress"></div>
                </div>
            </div>
            <div class="journey-connector"></div>
            <div class="journey-phase" data-phase="1">
                <div class="journey-dot"></div>
                <div class="journey-phase-info">
                    <div class="journey-phase-name">Practice</div>
                    <div class="journey-phase-desc">Answer from memory</div>
                    <div class="journey-phase-progress"></div>
                </div>
            </div>
            <div class="journey-connector"></div>
            <div class="journey-phase" data-phase="2">
                <div class="journey-dot"></div>
                <div class="journey-phase-info">
                    <div class="journey-phase-name">Speech</div>
                    <div class="journey-phase-desc">Speak the answer</div>
                    <div class="journey-phase-progress"></div>
                </div>
            </div>
        </div>
        <div class="journey-stats">
            <span>Cycle <span id="start-cycle">1</span></span>
            <span class="journey-stats-sep">&middot;</span>
            <span><span id="start-total-answers">0</span> answers</span>
            <span class="journey-stats-sep">&middot;</span>
            <span>Time: <span id="start-time-limit">10</span>s</span>
        </div>
    </div>

    <div class="start-buttons">
        <button id="start-btn">Start Learning</button>
    </div>
    <button class="back-btn" id="back-btn">Back</button>
</div>

<div id="stats-overlay">
    <div class="stats-title">Your Statistics</div>
    <div class="stats-grid">
        <div class="stats-card">
            <div class="stats-card-value" id="stats-total-correct">0</div>
            <div class="stats-card-label">Total Correct</div>
        </div>
        <div class="stats-card">
            <div class="stats-card-value" id="stats-highest-cycle">1</div>
            <div class="stats-card-label">Highest Cycle</div>
        </div>
        <div class="stats-card">
            <div class="stats-card-value" id="stats-best-streak">0</div>
            <div class="stats-card-label">Best Streak</div>
        </div>
        <div class="stats-card">
            <div class="stats-card-value" id="stats-games-played">0</div>
            <div class="stats-card-label">Games Played</div>
        </div>
    </div>
    <div class="language-stats">
        <div class="language-stats-title">By Language</div>
        <div id="language-stats-list"></div>
    </div>
    <div class="stats-buttons">
        <button id="close-stats-btn">Close</button>
        <button id="reset-stats-btn">Reset Stats</button>
        <button id="reset-progress-btn">Reset Progress</button>
    </div>
</div>

<div id="game-screen">
    <div class="game-controls">
        <button class="game-control-btn" id="pause-btn" title="Pause">â¸</button>
        <button class="game-control-btn" id="quit-btn" title="Quit">âœ•</button>
    </div>
    <div class="vertical-progress-container" id="vertical-progress-container">
        <div class="vertical-progress-bar" id="vertical-progress-bar"></div>
        <div class="vertical-progress-label" id="vertical-progress-label">0/10</div>
    </div>
    <div class="level-display">
        <div class="phase-badge learning" id="phase-badge">Learning</div>
        <div class="level-info">Level <span id="current-level">1</span></div>
        <div class="time-display">Time: <span id="time-display">10</span>s</div>
    </div>
    <div class="score-display"><span class="game-language-flag" id="game-language-flag">ğŸ‡ªğŸ‡¸</span> Score: <span id="current-score">0</span></div>
    <div class="prompt-label" id="prompt-label">What colour is this?</div>
    <div class="color-display" id="color-display"></div>
    <div class="reinforcement-label" id="reinforcement-label"></div>
    <div class="speech-ui" id="speech-ui">
        <div class="mic-indicator">
            <div class="mic-icon" id="mic-icon"></div>
            <span id="mic-status">Listening...</span>
        </div>
        <div class="voice-feedback" id="voice-feedback"></div>
    </div>
    <div class="speech-warning" id="speech-warning">
        Voice input requires a browser with Web Speech API support (Chrome, Edge) and microphone permission.
        Falling back to Practice Mode buttons.
    </div>
    <div id="timer-bar-container">
        <div id="timer-bar"></div>
    </div>
    <div class="buttons" id="buttons-container"></div>
</div>

<div id="pause-overlay">
    <div class="pause-title">Paused</div>
    <div class="pause-buttons">
        <button id="resume-btn">Resume</button>
        <button id="quit-from-pause-btn" class="pause-quit-btn">Quit to Menu</button>
    </div>
</div>

<div id="level-up-overlay">
    <div class="level-up-title" id="level-up-title">Level Up!</div>
    <div class="level-up-streak" id="level-up-streak"></div>
    <div class="level-up-message" id="level-up-message">You reached Level 2</div>
    <div id="level-up-phase-badge" class="phase-badge" style="display:none;"></div>
    <div class="level-up-phase" id="level-up-phase"></div>
    <div class="level-up-info" id="level-up-info"></div>
    <div class="level-up-time" id="level-up-time"></div>
    <div class="level-up-countdown" id="level-up-countdown">3</div>
</div>

<div id="cycle-complete-overlay">
    <div class="cycle-complete-title">Cycle Complete!</div>
    <div class="cycle-complete-message" id="cycle-complete-message">You finished Cycle 1!</div>
    <div class="cycle-complete-colors" id="cycle-complete-colors">New colours unlocked!</div>
    <div class="new-color-badges" id="new-color-badges"></div>
    <div class="cycle-complete-info">Time resets to 10 seconds</div>
    <div class="cycle-complete-countdown" id="cycle-complete-countdown">5</div>
</div>

<div id="end-screen">
    <h1>Well Done!</h1>
    <div id="end-message"></div>
    <div id="final-score">0</div>
    <div class="prompt-label">correct answers</div>
    <div class="personal-best" id="personal-best">New Personal Best!</div>
    <div class="best-streak-display" id="best-streak-display"></div>
    <div class="stats-row">
        <div class="stat-item">
            <div class="stat-value" id="accuracy-stat">0%</div>
            <div class="stat-label">accuracy</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="avg-time-stat">0.0s</div>
            <div class="stat-label">avg time</div>
        </div>
    </div>
    <br><br>
    <button id="restart-btn">Play Again</button>
</div>

<script src="data.js"></script>
<script src="app.js"></script>

</body>
</html>
